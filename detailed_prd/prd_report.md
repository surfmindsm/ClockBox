# ClockBox - PRD 세부 문서 : 리포트 (Report)

## 1. 개요 (Overview)
ClockBox의 리포트(Report) 기능은 근태, 휴가, 요청, 정산 데이터를 기반으로 통계 및 분석 리포트를 제공한다.

### 목적
- 경영진/관리자의 **데이터 기반 의사결정 지원**
- 법적 근거 자료 및 리스크 관리
- 급여/정산 데이터 제공

---

## 2. 사용자 시나리오 (User Flow)

### 시나리오 A: 근태 리포트 확인
1. 관리자가 리포트 > 근태 통계 선택  
2. 부서/지점/직무별 근로시간 집계 확인  
3. Excel 다운로드

### 시나리오 B: 휴가 리포트 확인
1. 관리자가 리포트 > 휴가 사용량 조회  
2. 직원별 연차 사용 현황 확인  

### 시나리오 C: 요청/정산 리포트
1. 요청 처리 현황, 승인/반려 비율 분석  
2. 마감된 급여 데이터와 연계하여 보고서 생성  

---

## 3. 기능 정의 (Feature Definition)
- **[FR-REP-001] 근태 리포트 생성/조회**
- **[FR-REP-002] 휴가 리포트 생성/조회**
- **[FR-REP-003] 요청 리포트 생성/조회**
- **[FR-REP-004] 정산 리포트 제공**
- **[FR-REP-005] 커스텀 리포트 생성 (필드 선택)**
- **[FR-REP-006] 리포트 스냅샷 보관**

---

## 4. UI/UX 요구사항
- 필터링: 기간/지점/직무/직원별 선택  
- 그래프/표 시각화 지원 (막대, 원형, 선 그래프)  
- 다운로드: Excel, CSV, PDF  

---

## 5. 비즈니스 규칙
- 리포트 조회 권한은 관리자만 가능  
- 데이터는 실시간 집계, 단 스냅샷은 특정 시점 데이터로 고정  
- 스냅샷은 최소 1년 보관  

---

## 6. 데이터 모델링 (초안)
리포트는 별도 테이블 대신 **집계 뷰/ETL 파이프라인** 활용  
- `report_attendance_view`  
- `report_leave_view`  
- `report_payroll_view`  

스냅샷 저장용 테이블 제공: `report_snapshots`  

---

## 7. 알림 및 연동
- 정기 리포트 메일 발송 (주간/월간)  
- ERP/회계 시스템으로 데이터 연동  
- 메시지 시스템과 연결해 알림 발송  

---

## 8. 예외 및 에러 처리
| 케이스 | 조건 | 시스템 동작 | 사용자 메시지 |
|--------|------|------------|--------------|
| 데이터 없음 | 조회 조건 결과 없음 | 빈 리포트 반환 | “해당 조건의 데이터가 없습니다.” |
| 권한 없음 | 직원 계정 접근 | 차단 | “리포트 조회 권한이 없습니다.” |
| 데이터 과다 | 조회 범위 > 1년 | 차단/분할 조회 | “조회 범위를 축소해주세요.” |

---

## 9. 연관성 (Dependency & Integration)
- **출퇴근기록 (prd_attendance.md)**: 근태 통계 집계  
- **휴가 (prd_leave.md)**: 휴가 사용 통계 반영  
- **요청 (prd_request.md)**: 요청 처리 현황 반영  
- **정산 (prd_payroll.md)**: 급여 정산 데이터 제공  

---

## 10. 성공 지표 (KPI)
- 리포트 생성 평균 시간 ≤ 5초  
- 리포트 다운로드 성공률 ≥ 99%  
- 관리자 리포트 활용률 ≥ 80%  
