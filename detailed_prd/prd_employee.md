# ClockBox - PRD 세부 문서 : 직원

## 1. 개요 (Overview)
ClockBox의 직원(Employee) 관리 기능을 정의한다.  
직원의 등록, 권한 관리, 근로 규칙 배정, 기기 초기화 및 계정 상태 관리 포함.

### 목적
- 직원별 근로 이력 관리
- 근무일정 및 출퇴근기록과 연계
- 권한 및 보안 제어

---

## 2. 사용자 시나리오 (User Flow)
### 시나리오 A: 신규 직원 등록
1. 관리자가 직원 등록 > 기본 정보 입력 (이름, 이메일, 전화번호)
2. 직무/지점 배정
3. 합류코드 자동 발급 → 직원 초대

### 시나리오 B: 직원 정보 수정
1. 관리자가 직원 프로필 진입
2. 직무 변경, 권한 변경
3. 변경 즉시 스케줄/리포트에 반영

### 시나리오 C: 직원 비활성화
1. 관리자가 퇴사자 비활성화 선택
2. 근무기록은 유지, 상태만 inactive

---

## 3. 기능 정의 (Feature Definition)
- **[FR-EMP-001] 직원 등록/수정/삭제**
- **[FR-EMP-002] 권한/역할 부여**
- **[FR-EMP-003] 근로규칙 배정**
- **[FR-EMP-004] 기기 초기화**
- **[FR-EMP-005] 직원 검색/필터링**

---

## 4. UI/UX 요구사항
- 직원 리스트 뷰: 검색/필터링 제공
- 직원 상세 뷰: 근무이력, 휴가, 요청 표시
- 퇴사 처리: 비활성화 버튼, 데이터 보존 표시

---

## 5. 비즈니스 규칙
- 직원은 최소 1개 지점/직무에 배정되어야 함
- 비활성화 직원은 출퇴근 기록 불가
- 직원 삭제는 불가, 영구삭제는 1년 후 가능

---

## 6. 데이터 모델링 (초안)
### employees 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 직원 ID |
| user_id | FK(users.id) | 계정 ID |
| org_id | FK(orgs.id) | 소속 지점 |
| role_id | FK(roles.id) | 직무 |
| status | enum(active, inactive, terminated) | 상태 |
| join_date | datetime | 입사일 |
| leave_date | datetime | 퇴사일 |
| created_at | datetime | 등록일 |

---

## 7. 알림 및 연동
- 신규 등록 시 직원에게 합류 메일 발송
- 권한 변경 시 알림
- 퇴사 처리 시 관리자에게 리포트 발송

---

## 8. 예외 및 에러 처리
| 케이스 | 조건 | 시스템 동작 | 사용자 메시지 |
|--------|------|------------|--------------|
| 중복 이메일 | 동일 이메일 존재 | 등록 차단 | “이미 등록된 이메일입니다.” |
| 미배정 직원 | 지점/직무 미배정 | 저장 차단 | “직원은 반드시 지점/직무에 배정되어야 합니다.” |
| 퇴사 처리 후 로그인 | status=terminated | 로그인 차단 | “퇴사 처리된 계정입니다.” |

---

## 9. 연관성 (Dependency & Integration)
- **조직/지점 (prd_org.md)**: 직원은 반드시 지점에 속해야 함
- **직무 (prd_role.md)**: 직무에 따른 근로 규칙 반영
- **근무일정 (prd_schedule.md)**: 직원 배정 스케줄 생성
- **출퇴근기록 (prd_attendance.md)**: 직원별 출퇴근 데이터 기록

---

## 10. 성공 지표 (KPI)
- 신규 직원 등록 후 합류 완료율 ≥ 90%
- 퇴사 처리 후 데이터 보존율 100%
