# ClockBox - PRD 세부 문서 : 직무

## 1. 개요 (Overview)
ClockBox 내 직무(Job) 관리 기능을 정의한다.  
직무별로 근무 규칙, 권한, 역할을 구분하여 관리한다.

### 목적
- 직무 단위로 근로 규칙 정의
- 부서/지점과 연계한 직무 관리
- 리포트/정산과 연결된 직무별 통계

---

## 2. 사용자 시나리오 (User Flow)
### 시나리오 A: 직무 생성
1. 관리자가 회사 설정 > 직무 추가 선택
2. 직무명, 근무 규칙 입력
3. 해당 직무에 직원 배정

### 시나리오 B: 직무 변경
1. 기존 직무 선택 → 근로 규칙 변경
2. 변경 즉시 직원 근무 스케줄에 반영

---

## 3. 기능 정의 (Feature Definition)
- **[FR-ROLE-001] 직무 생성/수정/삭제**
- **[FR-ROLE-002] 직무별 근로 규칙 매핑**
- **[FR-ROLE-003] 직무별 권한 부여**
- **[FR-ROLE-004] 직무별 리포트 연동**

---

## 4. UI/UX 요구사항
- 직무 리스트 (검색/필터 지원)
- 직원 프로필에서 직무 선택 가능
- 직무별 근무 규칙 상세 페이지 제공

---

## 5. 비즈니스 규칙
- 하나의 직원은 여러 직무 보유 가능 (겸직)
- 직무 삭제 시 배정된 직원은 “미배정” 상태로 이동
- 직무 변경은 과거 기록에 영향을 주지 않음 (이력 보존)

---

## 6. 데이터 모델링 (초안)
### roles 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 직무 ID |
| company_id | FK(companies.id) | 회사 ID |
| name | string | 직무명 |
| description | string | 설명 |
| work_rule_id | FK(work_rules.id) | 근로 규칙 |
| status | enum(active, inactive) | 상태 |

### work_rules 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 규칙 ID |
| type | enum(standard, flexible, shift) | 규칙 유형 |
| max_hours | int | 최대 근로시간 |
| min_hours | int | 최소 근로시간 |
| break_policy | string | 휴게시간 규칙 |

---

## 7. 알림 및 연동
- 직무 변경 시 배정 직원에게 알림
- 직무 삭제 시 관리자 경고 알림

---

## 8. 예외 및 에러 처리
| 케이스 | 조건 | 시스템 동작 | 사용자 메시지 |
|--------|------|------------|--------------|
| 중복 직무명 | 동일 회사 내 중복 | 생성 차단 | “이미 존재하는 직무명입니다.” |
| 미배정 직원 | 직무 삭제 후 미배정 발생 | 경고 표시 | “일부 직원이 미배정 상태로 변경됩니다.” |
| 잘못된 규칙 | 근로 규칙 불일치 | 저장 차단 | “올바른 근로 규칙을 선택해주세요.” |

---

## 9. 연관성 (Dependency & Integration)
- **직원 (prd_employee.md)**: 직원 직무 배정
- **근무일정 (prd_schedule.md)**: 직무별 근무 규칙 반영
- **리포트 (prd_report.md)**: 직무별 근로시간/휴가 통계

---

## 10. 성공 지표 (KPI)
- 직무 생성 후 직원 배정 완료율 ≥ 90%
- 직무별 근무 규칙 반영 정확도 ≥ 99%
