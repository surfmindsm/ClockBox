# ClockBox - PRD 세부 문서 : 근무일정

## 1. 개요 (Overview)
ClockBox의 근무일정(Schedule) 관리 기능을 정의한다.  
근무 스케줄 생성, 반복 일정, 교대근무, 휴게시간 규칙을 포함한다.

### 목적
- 다양한 근무제 대응 (정규, 교대, 유연, 재택)
- 근무일정 기반 리포트 및 정산 연동

---

## 2. 사용자 시나리오 (User Flow)
### 시나리오 A: 근무일정 생성
1. 관리자가 근무일정 생성 클릭
2. 유형 선택 (정규/교대/재택 등)
3. 직원 배정 및 저장

### 시나리오 B: 반복 일정 등록
1. 일정 생성 > 반복 옵션 선택
2. 주간/월간 반복 설정
3. 일정 자동 생성

### 시나리오 C: 교대근무 편성
1. 교대 패턴 등록
2. 직원별 순환 배정

---

## 3. 기능 정의 (Feature Definition)
- **[FR-SCH-001] 근무일정 생성/수정/삭제**
- **[FR-SCH-002] 반복 일정**
- **[FR-SCH-003] 교대근무 패턴**
- **[FR-SCH-004] 휴게시간 규칙 적용**
- **[FR-SCH-005] 일정 충돌 검증**

---

## 4. UI/UX 요구사항
- 달력 뷰/리스트 뷰 제공
- 일정 드래그 앤 드롭 편집
- 일정 확정/미확정 상태 표시

---

## 5. 비즈니스 규칙
- 동일 직원의 중복 일정 불가
- 휴게시간 자동 삽입
- 일정 확정 후 수정 시 로그 기록

---

## 6. 데이터 모델링 (초안)
### schedules 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 일정 ID |
| employee_id | FK(employees.id) | 직원 |
| start_time | datetime | 시작 |
| end_time | datetime | 종료 |
| type | enum(standard, shift, remote) | 근무 유형 |
| status | enum(confirmed, pending) | 상태 |

---

## 7. 알림 및 연동
- 일정 생성/변경 시 직원 알림
- 일정 확정 시 관리자 알림
- 캘린더 연동 (Google, Outlook)

---

## 8. 예외 및 에러 처리
| 케이스 | 조건 | 시스템 동작 | 사용자 메시지 |
|--------|------|------------|--------------|
| 중복 일정 | 동일 시간에 두 일정 | 저장 차단 | “중복 일정이 존재합니다.” |
| 잘못된 시간 | 종료 < 시작 | 저장 차단 | “종료 시간이 시작 시간보다 빠릅니다.” |
| 근로시간 초과 | 주52시간 초과 | 경고 표시 | “법정 근로시간을 초과합니다.” |

---

## 9. 연관성 (Dependency & Integration)
- **직원 (prd_employee.md)**: 직원 배정 필요
- **출퇴근기록 (prd_attendance.md)**: 일정 기반 출퇴근 인증
- **휴가 (prd_leave.md)**: 일정과 휴가 충돌 검증
- **정산 (prd_payroll.md)**: 일정 기반 급여 산출

---

## 10. 성공 지표 (KPI)
- 근무일정 충돌 검증 정확도 ≥ 99%
- 일정 확정 후 오류율 ≤ 1%
