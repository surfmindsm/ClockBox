# ClockBox - PRD 세부 문서 : 시작하기

## 1. 개요 (Overview)
ClockBox 서비스의 **최초 진입 및 온보딩 흐름**을 정의한다.  
사용자가 ClockBox에 가입하고, 회사를 생성하거나 합류하며, 관리자/직원 모드 전환을 통해 본격적인 근태·인력관리 기능을 활용할 수 있도록 한다.

### 목적
- 신규 사용자의 **빠른 적응**과 **서비스 이탈 최소화**
- **관리자/직원** 초기 역할 구분 명확화
- **회사 단위 데이터 관리 기반** 확보

---

## 2. 사용자 시나리오 (User Flow)

### 시나리오 A: 신규 회사 관리자
1. **앱/웹 접속** 후 회원가입 (이메일, 비밀번호, 약관 동의)  
2. **"새 회사 생성"** 선택  
3. **회사 기본 정보** 입력 (회사명, 업종, 사업자등록번호) → [저장]  
4. **자동으로 관리자 권한** 부여  
5. **온보딩 튜토리얼** 시작 (선택사항)
6. **기본 설정 가이드**: 지점/부서 생성 및 직원 초대 진행  
7. **관리자 대시보드** 진입 및 주요 기능 소개  

### 시나리오 B: 직원 합류
1. **앱/웹 접속** 후 회원가입  
2. **관리자 제공 합류코드** 입력  
3. **회사 정보 확인** 및 합류 승인 요청
4. **회사에 자동 합류** → 직원 권한 부여  
5. **직원용 온보딩**: 근무일정, 출퇴근 방법 안내
6. **메인 화면** 진입 및 필수 기능 투어

### 시나리오 C: 모드 전환
1. **관리자가 동시에 직원으로 등록**된 경우  
2. **프로필 영역**에서 **관리자 모드 ↔ 직원 모드** 전환 버튼 제공  
3. **전환 시 세션 유지** 및 알림 동기화
4. **모드별 튜토리얼** 재확인 옵션 제공

### 시나리오 D: 점진적 기능 활용 (Progressive Disclosure)
1. **핵심 기능 우선 노출**: 출퇴근, 일정 확인
2. **사용 패턴에 따른 고급 기능 제안**: 휴가 신청, 급여 조회 등
3. **개인화된 대시보드**: 자주 사용하는 기능 위주 배치
4. **적응도에 따른 도움말 조정**: 초보자/숙련자 모드  

---

## 3. 기능 정의 (Feature Definition)
- **[FR-START-001] 회원가입**
- **[FR-START-002] 회사 생성**
- **[FR-START-003] 직장 합류**
- **[FR-START-004] 모드 전환**
- **[FR-START-005] 가이드 & FAQ**
- **[FR-START-006] 인터랙티브 튜토리얼 시스템**
- **[FR-START-007] 단계별 온보딩 프로세스**
- **[FR-START-008] 상황별 도움말 시스템**

---

## 4. UI/UX 요구사항
- **직관적 가입 프로세스**: 소셜 로그인 지원 (Google, Apple, 카카오)  
- **단계별 온보딩 플로우**: 회사 생성/합류는 3단계 이내 완료  
- **모드 전환 인터페이스**: 관리자 ↔ 직원 모드 토글 버튼 (상단 우측)
- **다양한 형태의 가이드 지원**:
  - 텍스트 기반 도움말
  - 비디오 튜토리얼 (1-3분 내외)
  - 인터랙티브 투어 (실제 화면에서 진행)
  - 단계별 체크리스트
- **상황별 도움말 시스템**:
  - 툴팁 및 말풍선 가이드
  - 진행 상황 표시 (프로그레스 바)
  - 건너뛰기/다시보기 옵션
- **개인화된 대시보드**:
  - 사용자 역할별 맞춤형 레이아웃
  - 자주 사용하는 기능 우선 배치
  - 드래그 앤 드롭으로 위젯 재배열  

---

## 5. 비즈니스 규칙
- 하나의 이메일은 1개 관리자 계정만 생성 가능  
- 직원은 여러 회사에 합류 가능 (겸직 허용)  
- 합류코드: 유효기간(7일), 사용 횟수 제한  
- 회사 삭제 불가 (비활성화만 가능)  

---

## 6. 데이터 모델링 (초안)
### users 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 사용자 ID |
| email | string | 로그인 이메일 |
| phone | string | 휴대폰 번호 |
| password_hash | string | 비밀번호 해시 |
| role | enum(admin, employee, both) | 기본 역할 |
| status | enum(active, inactive) | 계정 상태 |
| created_at | datetime | 가입일 |
| last_login_at | datetime | 최근 로그인 |

### companies 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 회사 ID |
| name | string | 회사명 |
| industry | string | 업종 |
| business_number | string | 사업자번호 |
| created_by | FK(users.id) | 생성자 |
| status | enum(active, inactive) | 상태 |

### memberships 테이블
| 컬럼명 | 타입 | 설명 |
|--------|------|------|
| id | PK | 멤버십 ID |
| user_id | FK(users.id) | 사용자 ID |
| company_id | FK(companies.id) | 회사 ID |
| role | enum(admin, employee) | 역할 |
| join_code | string | 합류코드 |
| status | enum(active, pending, rejected) | 상태 |
| joined_at | datetime | 합류일 |

---

## 7. 알림 및 연동
- 회원가입 완료 → 이메일 인증 발송  
- 회사 생성 완료 → 관리자에게 알림  
- 합류 요청 발생 → 관리자에게 푸시/메일 알림  
- 합류 승인/거절 결과 → 직원에게 알림  

---

## 8. 예외 및 에러 처리
| 케이스 | 조건 | 시스템 동작 | 사용자 메시지 |
|--------|------|------------|--------------|
| 이메일 중복 가입 | 동일 이메일 존재 | 가입 실패 | “이미 등록된 계정입니다.” |
| 이메일 미인증 | 인증 미완료 상태 | 로그인 차단 | “이메일 인증 후 이용 가능합니다.” |
| 합류코드 만료 | 유효기간 경과 | 합류 불가 | “코드가 만료되었습니다. 관리자에게 새 코드를 요청하세요.” |
| 합류코드 사용 초과 | 설정된 횟수 초과 | 합류 불가 | “코드 사용 횟수를 초과했습니다.” |
| 잘못된 합류코드 | 존재하지 않음 | 합류 불가 | “유효하지 않은 코드입니다.” |
| 권한 없는 모드 전환 | 관리자/직원 권한 미보유 | 전환 차단 | “이 모드에 접근할 권한이 없습니다.” |
| 회사 생성 중 네트워크 오류 | API 실패 | 재시도 요청 | "네트워크 오류가 발생했습니다. 다시 시도해주세요." |
| 튜토리얼 로딩 실패 | 리소스 로드 오류 | 대체 텍스트 표시 | "비디오를 불러올 수 없습니다. 텍스트 가이드로 진행하시겠어요?" |
| 도움말 검색 결과 없음 | 키워드 매칭 실패 | 관련 항목 제안 | "검색 결과가 없습니다. 이런 항목은 어떠신가요?" |

## 8-1. 고급 도움말 & FAQ 시스템
### FAQ 구성 요소
- **카테고리별 분류**: 
  - 시작하기 (회원가입, 회사설정)
  - 출퇴근 관리
  - 일정 및 근무시간
  - 휴가 및 신청
  - 급여 및 정산
  - 기술적 문제
- **검색 기능**:
  - 키워드 검색 (자동완성 지원)
  - 태그 기반 필터링
  - 인기 검색어 제안
- **콘텐츠 형태**:
  - 단계별 텍스트 가이드
  - 스크린샷 포함 설명
  - 짧은 데모 비디오 (30초-1분)
  - 체크리스트 형태 요약
- **사용자 참여**:
  - 도움이 되었나요? (👍/👎)
  - 추가 질문 남기기
  - 관련 문서 추천

---

## 9. 연관성 (Dependency & Integration)
- **조직/지점 (prd_org.md)**: 회사 생성 시 기본 지점 자동 생성  
- **직원 (prd_employee.md)**: 합류코드 입력 → 직원 등록 프로세스 연동  
- **요청 (prd_request.md)**: 합류 요청 → 승인 프로세스와 연결  
- **메시지 (prd_message.md)**: 합류 승인/거절 알림 발송  

---

## 10. 성공 지표 (KPI)
### 기본 성과 지표
- 신규 가입 후 **회사 생성 완료율 ≥ 80%**  
- 직원 초대 → 합류 완료율 **≥ 85%**  
- FAQ 조회 대비 고객센터 문의율 **20% 이상 감소**  
- 온보딩 완료 평균 시간 **5분 이내**

### 튜토리얼 & 도움말 관련 지표
- **튜토리얼 완료율**: 시작한 사용자 중 80% 이상 완주
- **도움말 만족도**: 평균 4.0/5.0 이상 (👍/👎 평가)
- **재방문률**: 첫 로그인 후 7일 내 재접속률 70% 이상
- **기능 발견율**: 주요 기능 3개 이상을 첫 주에 사용하는 비율 60% 이상
- **도움말 검색 성공률**: 검색 후 도움이 된다고 응답한 비율 75% 이상

### 사용성 개선 지표
- **모드 전환 사용률**: 다중 역할 사용자의 월간 전환 빈도
- **개인화 활용도**: 대시보드 커스터마이징 사용률
- **가이드 건너뛰기율**: 20% 이하 유지 (적절한 콘텐츠 길이 검증)

---

## 11. 상황별 도움말 시스템 (Contextual Help)
### 실시간 가이드 기능
- **스마트 툴팁**: 
  - 처음 접하는 기능에 자동 표시
  - 사용자 숙련도에 따라 표시 빈도 조정
  - 3회 이상 사용 시 자동 비활성화
- **진행 상황 추적**:
  - 온보딩 체크리스트 (회사 설정, 직원 초대, 첫 출근 등)
  - 단계별 완료 표시와 다음 액션 제안
  - 중단된 작업 재개 알림
- **적응형 인터페이스**:
  - 사용자 행동 패턴 분석
  - 자주 사용하는 기능 우선 노출
  - 사용하지 않는 고급 기능 숨김 처리

### 다국어 및 접근성
- **언어 지원**: 한국어, 영어 (추후 확장 가능)
- **접근성 준수**: 
  - 스크린 리더 호환
  - 키보드 네비게이션 지원
  - 고대비 모드 지원
- **반응형 디자인**: 모바일, 태블릿, 데스크톱 최적화
