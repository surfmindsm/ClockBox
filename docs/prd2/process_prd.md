# 휴가·근무 승인 관리 플로우 정리

## 1. 주요 개념 정의
- **요청자(일반 직원)**: 휴가/근무를 신청하는 구성원. 반드시 주조직에 발령되어야 함.
- **조직장(1차/2차/3차)**: 조직의 결재 권한자. 관리자가 발령으로 지정.
- **관리자**: 승인 정책(템플릿)과 조직장 발령을 설정·유지.
- **승인 템플릿**: 결재선(1차→2차→3차), SLA(자동승인), 참조자, 예외 규칙 등을 정의한 정책 묶음.
- **휴가 종류**: 연차, 반차, 병가, 경조사, 무급, 공가 등.
- **근무 신청 종류**: 연장근무, 휴일근무, 특근 등.
- **요청자별 승인(예외 규칙)**: 특정 작성자(대표·임원 등)에 대해 표준 결재선 대신 별도 결재선을 적용.

---

## 2. 일반 직원 기준 전체 플로우

### 1) 신청 단계
1. 직원이 **휴가/근무 신청** 작성 (유형, 기간/시간, 사유 입력).
2. 시스템이 **승인 정책(템플릿)** 조회:
   - 요청자별 예외 규칙 → 조직/직무/직급별 정책 → 기본 정책 순으로 적용.
3. 정책에 따라 **결재선(1차/2차/3차 조직장)** 확정 → 스냅샷 고정.

### 2) 결재 진행 단계
- **1차 조직장**
  - 승인 → 2차 조직장으로 이동.
  - 반려 → 즉시 종료.
  - 미처리 → SLA 자동 승인.

- **2차 조직장**
  - 승인 → 3차 조직장으로 이동.
  - 반려 → 즉시 종료.
  - 미처리 → SLA 자동 승인.

- **3차 조직장**
  - 승인 → 최종 승인 완료.
  - 반려 → 즉시 종료.
  - 미처리 → SLA 자동 승인.

- **최상위 조직장**: 상위 조직 없음 → 정책에 따라 자동 승인 처리 가능.

### 3) 처리 완료 단계
- **최종 승인**
  - 휴가: 잔여연차 차감, 휴가 캘린더 반영.
  - 근무: 근태·수당 계산 엔진 반영(연장수당, 휴일수당 등).
- **최종 반려**
  - 직원에게 반려 사유와 함께 알림.
- **참조자(CC)**
  - 시작/완료 시점에 알림 발송.

### 4) 예외 처리
- **자기 승인 방지**: 요청자가 조직장 본인일 경우 상위 조직장으로 자동 승격.
- **조직장 미발령/부재**: 상위 조직장 또는 HR 담당자로 자동 치환.
- **중복/충돌 검출**: 기존 휴가/근무와 일정이 겹치면 경고 또는 제출 차단.
- **취소/수정**: 1차 승인 전까지 가능. 이후는 관리자 규정에 따라 처리.

---

## 3. 케이스별 플로우 요약

### 케이스 A. 일반 휴가 신청 (2단계 결재)
- 직원 → 1차 조직장 승인 → 2차 조직장 승인 → 최종 승인 → 반영/알림.

### 케이스 B. 조직장 부재/미발령
- 상위 조직장 또는 HR 담당자로 자동 대체 후 동일 플로우 진행.

### 케이스 C. 대표가 1차 조직장으로 잡힌 경우
- 예외 규칙 적용: HR → 상위 임원 순으로 결재 진행.

### 케이스 D. 반려
- 어느 단계에서든 반려 시 즉시 종료 → 직원 알림 → 재신청 가능.

### 케이스 E. 자동 승인 (SLA)
- 각 단계에서 기한 내 미처리 → 자동 승인 처리 → 다음 단계 진행 또는 종료.

### 케이스 F. 취소/수정
- 1차 승인 전까지 직원이 취소/수정 가능. 수정 시 재신청으로 처리.

### 케이스 G. 근무 신청 (연장근무 등)
- 휴가와 동일한 결재 플로우 → 최종 승인 시 근태/수당 계산 엔진 반영.

### 케이스 H. 중복/충돌 검출
- 제출 시 기존 일정과 충돌 시 경고 또는 제출 차단.

### 케이스 I. 자기 승인 방지
- 자기 자신이 조직장인 경우 → 상위 조직장으로 자동 승격 후 진행.

---

## 4. 요약
- **일반 직원**: 신청 → 정책 기반 결재선 확정 → 순차 승인(1차→2차→3차) → 최종 승인/반려 → 결과 반영 및 알림.
- **관리자**: 조직장 발령 및 승인 정책 관리.
- **조직장**: 본인 단계에서 승인/반려 권한 행사.
