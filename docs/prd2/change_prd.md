# 📌 교대 근무 유형 정책 문서 (Draft)

## 1) 개요

* **정의:** 하루 소정 근로시간은 고정(예: 8h)이나, **근무 요일·시작 시간·휴무가 주기적으로 변동**하는 형태(병원·제조·중공업 등).
* **운영 전제:** 교대 근무 유형 생성 → **스케줄(근무표) 배치** → 게시/공지 후 운영.
* **권한:** 근무 유형/정책 설정 권한이 있는 관리자만 생성·수정 가능.

---

## 2) 기본 설정

### 2.1 접근 경로

* \[설정] → \[근무 유형] → \[유형 추가] → **\[교대 근무]**

### 2.2 핵심 항목

| 항목          | 설명                                  | 권장/예시                     |
| ----------- | ----------------------------------- | ------------------------- |
| 근무 유형명      | 식별 가능한 유형명                          | 교대근무(생산1팀), 3조2교대(병동A)    |
| 한 주의 근무일    | 주간 소정 근무일수                          | 보통 5일 *(패턴에 따라 4\~6일 가능)* |
| 주휴일         | **주 1회 이상 유급휴일** 지정. 스케줄 배치에서 변경 가능 | 기본: 일요일(스케줄에 따라 가변)       |
| 근무 주기 시작 요일 | 스케줄 주기 기준 시작 요일                     | 월요일                       |
| 일하는 시간      | 일 소정 근로시간(휴게 제외)                    | 보통 8시간                    |
| 총 휴게시간      | 법정 기준 충족(4h≥30m, 8h≥1h)             | 보통 1시간                    |

> **주의:** 근로기준법 제55조 제1항에 따른 **주휴일 보장** 원칙을 기본값으로 강제하되, 불가피할 경우 “주휴일 주기 초과 허용(고급 설정)”로 예외 게시 가능(아래 8.3).

---

## 3) 교대 패턴(조·근무표) 모델

교대 근무의 실무 핵심은 **패턴 정의 → 조 편성 → 스케줄 배치**입니다.

### 3.1 패턴 타입(예시)

| 패턴    | 예시 템플릿                                                 | 설명               |
| ----- | ------------------------------------------------------ | ---------------- |
| 2교대   | 주간(07:00~~15:00) / 야간(15:00~~23:00)                    | 8h 기준, 동일 일수 반복  |
| 3교대   | 주간(07:00~~15:00) / 석간(15:00~~23:00) / 야간(23:00\~07:00) | 8h×3교대, 야간 포함    |
| 4조2교대 | A/B/C/D조 순환, (주간/야간) 교번 + 휴무                           | 연속 공정, 휴무일 순환 포함 |
| 가변 스윙 | 주간→야간→휴무 규칙 등                                          | 병동 스윙, 주말 가중 등   |

> **필수 입력:** `(근무코드, 근무명, 시작·종료시각, 휴게규칙, 소정근로)`
> **선택 입력:** `(야간/특근 플래그, 수당그룹, 식사시간, 특수안전교육 필요 여부 등)`

### 3.2 조(Team) 편성

* 최소 2조 이상. 각 구성원은 **기본 소속 조**를 가짐.
* 조 전환(로테이션) 주기 설정: N일/N주 후, **패턴 순환 규칙**에 따라 자동 이동 옵션.

### 3.3 스케줄 배치(Assign)

* 단위: **개인 / 조 / 부서 / 사업장**
* 기간: **주별/월별/맞춤 기간**
* 상태: **작성중(Draft) → 게시(Published) → 잠금(Lock)**
* 게시 시 옵션: 알림(푸시/메일), 교대표 인쇄물, 캘린더/모바일 동기화

---

## 4) 연장근무(OT) 정책

### 4.1 입력 규칙

| 항목       | 설명                 | 예시                |
| -------- | ------------------ | ----------------- |
| 최소 입력 시간 | 이 미만은 OT 불인정       | 60분(권장)           |
| 입력 단위    | 지정 단위로만 입력 가능      | 30분/60분           |
| 단위 미달 처리 | 실시간 기록 시 단위 미달분 보정 | 올림 / 내림 *(정책 선택)* |

> **예:** 입력단위 30분, 45분 실제 발생 → **올림**이면 60분 인정 / **내림**이면 30분 인정.

### 4.2 정시·조정 로직

* 스케줄 배치 시간을 **정시**로 간주.
* 정시 인정 범위(예: ±5분) 내에서는 **정시 출·퇴근으로 보정** 가능.
* **정시 이전 출근 허용** ON 시, 정시 이전 실근무 인정(퇴근 시 OT 계산에 반영).

---

## 5) 근무 기록(출·퇴근) 정책

### 5.1 자동 근무 기록

* ON 시, 스케줄 배치 시간(예: 09:00\~18:00)에 맞춰 **자동 기록**.
* 자동 기록은 **추천 휴게** 대신 **법정 최소 휴게 자동 삽입** 규칙을 우선 적용(권장 안전장치).

### 5.2 실시간 근무 기록

* 앱/웹/단말기(GPS·QR·지문·카드 등) 실시간 기록 허용.
* 기록 정책과 충돌 시 **정책 우선/실시간 우선/관리자 승인** 3가지 중 선택.

### 5.3 기록 정책 관리

* **정시 설정:**

  * 모드 A: 정시만 인정
  * 모드 B: 정시 ±N분 범위 인정(예: 5분)
* **기록 설정:**

  * 정시 이전 출근 기록 허용 ON/OFF
  * 휴게 직접 기록 허용 ON/OFF
* **퇴근 기록 누락 처리:**

  * (a) **자동 퇴근**: 근무 시작 시각 + (소정근로 + 휴게)로 자동 종료
  * (b) **출근만 남김**: 구성원이 사후 입력(편집 권한 필요)

> 자동 퇴근 예: 소정 8h, 휴게 1h → **시작+9h**로 종료 처리.
> 자동 퇴근 시 **추천 휴게**가 아닌 \*\*법정 최소 휴게(4h당 30m)\*\*가 삽입될 수 있음을 명시.

---

## 6) 휴게시간 정책

* 기본: 4h 근무 시 30m 이상, 8h 근무 시 1h 이상.
* **총 휴게시간**을 근무코드별 또는 유형 공통으로 설정.
* \*\*추천 휴게(점심/저녁)\*\*를 운영하되, 실근무 전개에 따라 **법정 자동 보정** 옵션 제공.

---

## 7) 검증(Validation) & 예외 처리

### 7.1 스케줄 검증

* **중복 배치 금지:** 동일 시각에 2개 이상 근무코드 금지.
* **연속 근무 간 최소 휴식시간**(회사 규정, 예: 8\~11h) 설정 가능.
* **최대 연속 야간 제한**(회사 규정, 예: 4\~6회) 설정 가능.
* **주휴일 간격:** 7일 이내 1회 이상 유급휴일 보장(기본 강제).

  * 예외: “주휴일 주기 초과 허용” ON 시 게시 가능(아래 8.3).

### 7.2 기록 예외

* **정시 미배치 상태:** 정시 판단 불가 → 실시간만 허용(경고).
* **단위 미달 OT:** 정책에 따라 즉시 올림/내림 보정 후 저장.
* **휴게 미달:** 자동 삽입(정책 OFF 시 경고 또는 저장 불가 선택).

### 7.3 충돌 해소 규칙

* 자동 기록 vs 실시간 기록 불일치 시:

  1. 자동 우선
  2. 실시간 우선
  3. 관리자 승인 후 최종 반영
     *(유형별 기본값 지정 가능)*

---

## 8) 고급 설정

### 8.1 휴게 미달 근무 기록 허용 (기본: OFF)

* OFF: 휴게 미달 시 자동 휴게 삽입 또는 저장 불가.
* ON: 휴게 강제 삽입하지 않음(감사 리스크 고지).

### 8.2 법정근로시간 초과 기록 허용 (기본: OFF)

* OFF: 주 52시간(또는 회사 상한) 초과 입력 차단.
* ON: 초과 입력 허용(리스크 경고/승인필요 설정 가능).

### 8.3 **주휴일 주기 초과 등록 허용** (기본: OFF)

* 기본은 **7일 이내 1회 이상 주휴일** 보장.
* ON 시, 불가피한 게시 허용(게시 전 경고/결재선 지정 옵션 권장).

---

## 9) 알림·공유

* **스케줄 게시/수정/취소** 시 푸시·메일 알림.
* 개인 캘린더(구글/아웃룩) 연동 옵션.
* 모바일 앱 **내 스케줄/내 근무조** 위젯 제공.

---

## 10) 권한·변경 관리

* **작성/편집/게시/잠금** 권한 분리.
* 게시 후 **잠금** 상태에서 **예외 변경**은 이력·사유 기록 필수.
* **스왑 요청**(조 간 교대 변경): 요청→승인→반영 워크플로(감사 로그).

---

## 11) 급여·수당 연계(정책 슬롯)

* **수당그룹**을 근무코드에 매핑:

  * 야간(예: 22:00\~06:00) / 휴일 / 연장 / 특근 등 차등 계산
* **계산 기준/가중치**는 회사 규정 표준안으로 설정(노무 자문 반영 가능).
* 근무기록 → 정산(연장·야간·휴일시간 분리) → 급여 모듈 연동.

> *(법정 가산율 등은 회사 규정/노무 자문에 따르도록 시스템 슬롯만 제공 권장)*

---

## 12) 운영 가이드 (추천 Preset)

* **패턴:** 3교대(주/석/야) + 순환휴무
* **정시 인정 범위:** ±5분
* **정시 이전 출근 기록 허용:** ON(현장 유연성), 단 **OT 단위 30분/최소 60분**
* **자동 근무 기록:** OFF(현장 단말 실시간 원칙), 야간만 예외 ON 가능
* **휴게:** 총 60분(점심 30 + 중간 30), 미달 시 자동 30분 삽입
* **검증:** 연속 야간 4회 제한, 연속 근무 간 최소 휴식 10h
* **주휴:** 7일 이내 1회 이상(예외 게시 시 결재필수)

---

## 13) 예시 시나리오

### 13.1 정시 인정 범위 5분

* 배치: 09:00\~18:00
* 08:58 출근 클릭 → **정시 09:00로 보정 입력**(정시 이전 허용 OFF인 경우)
* 18:04 퇴근 클릭 → **정시 18:00로 보정**
* 18:07 퇴근 → **OT 0분(단위 30분 미달 → 내림)**

### 13.2 정시 이전 허용 ON + OT 올림

* 08:50 출근, 18:00 퇴근 → 실근로 9:10 → **OT 10분 발생**
* 입력단위 30분 & **올림** → **OT 30분 인정**

### 13.3 자동 퇴근

* 09:00 시작 클릭 후 종료 미입력 → 소정8h + 휴게1h → **17:00 또는 18:00 자동 종료**(회사 정책에 따라)
* 휴게는 **법정 최소 휴게 자동 삽입** 우선.

### 13.4 주휴일 주기 초과 허용

* 생산량 급증으로 일시적 주휴 지연 필요 → 예외 게시(경고/결재) → **다음 주기 내 보전** 가이드 노출

---

## 14) 데이터 스키마(요약 제안)

* `shift_types`: id, name, weekly\_workdays, cycle\_start\_weekday, default\_daily\_hours, default\_break\_minutes, policies\_json
* `shift_codes`: id, code, name, start\_time, end\_time, break\_rule, flags(overnight, night, holiday, …), allowance\_group\_id
* `teams`: id, name, rotation\_rule, color
* `team_members`: team\_id, member\_id, join\_date, leave\_date
* `rosters`: id, period\_from, period\_to, status(draft/published/locked), created\_by
* `roster_lines`: roster\_id, member\_id/team\_id, date, shift\_code\_id, rest\_day\_flag, notes
* `attendance`: member\_id, date, in, out, breaks\[], source(app/device/auto), status, policy\_adjustments
* `overtime`: attendance\_id, minutes\_raw, minutes\_adjusted, rounding\_mode
* `audit_logs`: entity, entity\_id, action, before/after, reason, actor, timestamp

---

## 15) 관리자 화면 UX 체크리스트

* 패턴 템플릿 갤러리(2/3교대, 4조2교대 등)
* 드래그·다중선택 배치, 휴무 대량 지정
* 게시 전 **검증 리포트**(중복, 주휴, 야간 연속, 휴게 미달 등)
* 게시/잠금/예외 변경 이력
* 스왑/대타 요청 승인함(사유·첨부)
* OT 조정 내역 가시화(“원래 시각 → 정책 보정 시각”)
